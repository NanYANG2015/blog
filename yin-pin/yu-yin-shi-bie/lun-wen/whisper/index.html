<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Whisper, AI, 语音, 算法">
    <meta name="description" content="
作者：OpenAI
wav2vec 2.0
等无监督预训练的语音编码器，需要有监督训练解码器。Whisper
采用多语种、多任务训练，以及 68wh
大规模低质量弱监督训练集，可以在广泛的语音环境中鲁棒地工作，不需要特定数据集的">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Whisper | 梦园</title>
    <link rel="icon" type="image/png" href="/blog/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/blog/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/blog/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/blog/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/blog/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/blog/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/blog/css/matery.css">
<link rel="stylesheet" type="text/css" href="/blog/css/my.css">
<link rel="stylesheet" type="text/css" href="/blog/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/blog/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/blog/css/post.css">




    



    <script src="/blog/libs/jquery/jquery-3.6.0.min.js"></script>

    <!-- Google Site Verification -->
    
        <meta name="google-site-verification" content="wJ93QtauTaHcAdSnPmDKlVioh-uZJAIGPiJ5sKqbkYA">
    

    <!-- Bing Site Verification -->
    
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">梦园</div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/blog/" class="waves-effect waves-light">
      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/blog/categories" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/blog/about">
          
          <i class="fas fa-user-circle" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>我</span>
        </a>
      </li>
      
      <li>
        <a href="/blog/words">
          
          <i class="fas fa-pen" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>文字</span>
        </a>
      </li>
      
      <li>
        <a href="/blog/books">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>书</span>
        </a>
      </li>
      
      <li>
        <a href="/blog/videos">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>视频</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/blog/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">梦园</div>
        <div class="logo-desc">
            
            欢迎来到梦园，这里主要记录、分享 语音、AI 相关论文、算法与思考，欢迎关注与交流！
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/blog/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-list"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/blog/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-user-circle"></i>
			
			关于
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/blog/about " style="margin-left:75px">
				  
				   <i class="fa fas fa-user-circle" style="position: absolute;left:50px" ></i>
			      
		          <span>我</span>
                  </a>
                </li>
              
                <li>

                  <a href="/blog/words " style="margin-left:75px">
				  
				   <i class="fa fas fa-pen" style="position: absolute;left:50px" ></i>
			      
		          <span>文字</span>
                  </a>
                </li>
              
                <li>

                  <a href="/blog/books " style="margin-left:75px">
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>书</span>
                  </a>
                </li>
              
                <li>

                  <a href="/blog/videos " style="margin-left:75px">
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>视频</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="/blog/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/blog/';
            }
        }
    })();
</script>


<div class="bg-cover pd-header about-cover">
    <div class="container">
    <div class="row">
    <div class="col s10 offset-s1 m8 offset-m2 l8 offset-l1">
        <div class="brand">
            <div class="title">
                
                愿，彼此相伴，走过流年
                
            </div>
        </div>
    </div>
</div>

    </div>
</div>



<main class="post-container content">

    
    <style>
    /* 随视窗调整大小、滚动 */
    #toc-content {
        height: calc(100vh - 200px);
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="pd-header post-cover">
                <div class="container" style="right: 0px;left: 0px;">
                    <div class="row">
                        <div class="col s12 m12 l12">
                            <div class="brand">
                                <h1 class="description center-align post-title">Whisper</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tag-cate">
                <div class="right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/blog/categories/%E9%9F%B3%E9%A2%91/" class="post-category">
                                音频
                            </a>
                        
                            <a href="/blog/categories/%E9%9F%B3%E9%A2%91/%E8%AF%AD%E9%9F%B3%E8%AF%86%E5%88%AB/" class="post-category">
                                语音识别
                            </a>
                        
                            <a href="/blog/categories/%E9%9F%B3%E9%A2%91/%E8%AF%AD%E9%9F%B3%E8%AF%86%E5%88%AB/%E8%AE%BA%E6%96%87/" class="post-category">
                                论文
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2024-05-26
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2024-10-29
                </div>
                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/blog/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <ul>
<li>作者：OpenAI</li>
<li><font color="red">wav2vec 2.0
等无监督预训练的语音编码器，需要有监督训练解码器。Whisper
采用多语种、多任务训练，以及 68wh
大规模低质量弱监督训练集，可以在广泛的语音环境中鲁棒地工作，不需要特定数据集的微调、zero-shot
性能也较好。</font></li>
<li><font color="red">创新点</font>
<ul>
<li><font color="red">通过在 decoder 端添加任务提示，实现 multitask
训练。且验证了多任务、多语种训练有知识迁移正收益。</font></li>
<li><font color="red">训练数据量大。</font></li>
<li><font color="red">训练时以 50%
的概率将当前音频之前的转写文本添加到解码器的上下文中。实际应用中，推理时可输入上一窗口的识别结果用于长音频识别，或特定领域、特定任务的提示。</font></li>
<li><font color="red">直接预测原始的转写文本，而不需要单独的 ITN
模块，简化了流程。</font></li>
</ul></li>
<li><font color="red">发现</font>
<ul>
<li><font color="red">训练数据每增加16倍，WER 减半。</font></li>
<li>采用对数概率作为得分。从温度0开始，即始终选择最高概率的token。当生成
token 的平均对数概率低于 -1，或生成文本的 gzip
压缩率大于2.4时，将温度提高 0.2 直到 1.0，最终为 5 beams 的 beam
search。当温度低于 0.5
时，将前一个窗口的转写文本作为上文输入。<font color="red">可以减少贪婪解码中更频繁出现的重复循环。</font></li>
</ul></li>
</ul>
<h1 id="模型">1. 模型</h1>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEBbd20803d649ee1ac60ace53dfad2bb8e?method=download&shareKey=e472e659f0649f8ee4ad233b75a56240" width="991"></p>
<table style="width:100%;">
<colgroup>
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr>
<th>Size</th>
<th>Layers</th>
<th>Width</th>
<th>Heads</th>
<th>Parameters</th>
<th>Required VRAM</th>
<th>Relative speed</th>
</tr>
</thead>
<tbody>
<tr>
<td>tiny</td>
<td>4</td>
<td>384</td>
<td>6</td>
<td>39 M</td>
<td>~1 GB</td>
<td>~32x</td>
</tr>
<tr>
<td>base</td>
<td>6</td>
<td>512</td>
<td>8</td>
<td>74 M</td>
<td>~1 GB</td>
<td>~16x</td>
</tr>
<tr>
<td>small</td>
<td>12</td>
<td>768</td>
<td>12</td>
<td>244 M</td>
<td>~2 GB</td>
<td>~6x</td>
</tr>
<tr>
<td>medium</td>
<td>24</td>
<td>1024</td>
<td>16</td>
<td>769 M</td>
<td>~5 GB</td>
<td>~2x</td>
</tr>
<tr>
<td>large/large-v2/large-v3</td>
<td>32</td>
<td>1280</td>
<td>20</td>
<td>1550 M</td>
<td>~10 GB</td>
<td>1x</td>
</tr>
</tbody>
</table>
<ul>
<li><p>音频：30s。没有语音的片段 <span class="math inline">\(10
\times\)</span> 下采样也加入训练。16kHz，80维FBank，25ms 窗长，10ms
hop。</p></li>
<li><p>特征归一化：[-1, 1]，零均值。</p></li>
<li><p><span class="math inline">\(2 \times Conv1D\)</span>：kernel
3，第2层 stride 2。</p></li>
<li><p>encoder output + layer norm</p></li>
<li><p>文本：BPE tokenizer。</p></li>
<li><p><font color="red">以 50%
的概率将当前音频之前的转写文本添加到解码器的上下文中。</font></p></li>
<li><p>时间戳预测：训练集中的时刻被量化为20ms分辨率。</p></li>
<li><p>存在音频截断时</p>
<ul>
<li>预测时间戳：最后只预测起始时刻token。</li>
<li>不预测时间戳：截断音频，使其不包含不完整的token。</li>
</ul></li>
<li><p><font color="red">多任务训练：口语语种识别、多语种语音识别、语音翻译、VAD。</font></p></li>
<li><p>超参数</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEBac5a0219964b788e71002aeeb36a0ed2?method=download&shareKey=57995ce43c68a48fde48a34814cbb555" width="360"></p></li>
<li><p>Large V2</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB35781e40821ba56bc40ec46a18412a5a?method=download&shareKey=f15bc329d64997e2dbaeb9c11fcd173b" width="335"></p></li>
<li><p>Large V3</p>
<ul>
<li>音频特征：128 维 FBank。</li>
<li>训练集：100wh 弱标注数据 + 400wh 采用 Large V2
生成的伪标签数据。</li>
<li>2 epoch。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/openai/whisper/discussions/1762" class="uri">https://github.com/openai/whisper/discussions/1762</a></li>
</ul></li>
</ul>
<h1 id="数据集">2. 数据集</h1>
<ul>
<li>43.8wh 英语 ASR 数据（约占65%）</li>
<li>11.7wh 其它 96 个语种的识别数据。</li>
<li>12.6wh <span class="math inline">\(x \rightarrow \text {en}\)</span>
翻译数据。</li>
<li>各语种数据量详见附录E。</li>
</ul>
<h1 id="数据处理">3. 数据处理</h1>
<ul>
<li><font color="red">直接预测原始的转写文本，而不需要单独的 ITN
模块，简化了流程。</font></li>
<li>转写文本筛选
<ul>
<li>删除机器生成的转写文本（如不包含逗号、感叹号、问号等复杂的标点符号，全大写或全小写）。在人工和机器混合生成的数据集上训练，会显著地损害翻译系统的性能。</li>
<li>语种检测。剔除音频、文本语种不匹配的，但保留文本为英语的作为翻译样本。</li>
<li>文本模糊去重。</li>
</ul></li>
<li>训练得到初始模型后，对训练集中的数据源根据 WER、数据大小
排序，人工检查，剔除低质量数据源。</li>
<li>避免污染：对训练集和重叠风险很高的测试集 TED-LIUM 3
进行文本去重。</li>
<li>存在的问题：许多转写文本包含当前说话人的名字。Whisper
在不存在上述情况的子集上进行了微调。</li>
</ul>
<h1 id="zero-shot-评价">4. zero-shot 评价</h1>
<h2 id="tn">4.1. TN</h2>
<ul>
<li>计算 WER 前进行 TN，以减少非语义差异的惩罚。</li>
</ul>
<h3 id="英语">4.1.1. 英语</h3>
<ol start="0" type="1">
<li>转小写</li>
<li>删除[]中的内容</li>
<li>删除()中的内容</li>
<li>删除 hmm, mm, mhm, mmm, uh, um</li>
<li>删除 ' 前的 whitespace</li>
<li>将标准的或非正式的缩略形式转换为原始形式</li>
<li>删除数字间的逗号</li>
<li>删除其后不为数字的句号</li>
<li>删除除句号、百分比、货币符号之外的 Unicode 类别以 M、S、P开头的字符
<ul>
<li>M：Miscellaneous
Symbols，包含箭头、几何形状、星号、圆圈等，如➡、★、○ 等</li>
<li>S：Symbols，包含货币符号、标点符号、数学符号、技术符号等，如$、%、℃
等</li>
<li>P：Punctuation，标点符号</li>
</ul></li>
<li>将数字、货币转换为阿拉伯数字，如 Ten thousand dollars <span class="math inline">\(\rightarrow\)</span> $10000</li>
<li>将英式拼写转换为美式拼写</li>
<li>删除前/后不为数字的百分比、句号、货币符号</li>
<li>将连续的 whitespace 替换为 1个空格</li>
</ol>
<h3 id="非英语">4.1.2. 非英语</h3>
<ol type="1">
<li>删除[]中的内容</li>
<li>删除()中的内容</li>
<li>将 NFKC-normalized 字符串中 Unicode 类别以 M、S、P
开头的字符替换为1个空格</li>
<li>转小写</li>
<li>将连续的 whitespace 替换为 1个空格</li>
<li>对于不以空格分隔单词的语种，每个 Unicode 字符间插入1个空格</li>
</ol>
<h2 id="英语语音识别">4.2. 英语语音识别</h2>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEBd35e737cea04cd547ac7bf9c27a2f70a?method=download&shareKey=8ff960ceb46e3ee800afe7f0f0cfecae" width="346"></p>
<ul>
<li><font color="red">虽然在 LibriSpeech test-clean 上的 WER 高于
SOTA，但相较于在 LibriSpeech
上监督训练的模型，在其它测试集上的泛化性能更好。</font></li>
</ul>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB836ace73368a699aefd86ad561fadfd7?method=download&shareKey=5dc9e9a441ae3044b1319d39750e2934" width="912"></p>
<h2 id="多语种识别">4.3. 多语种识别</h2>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB849dfce200ed0c6e3d11466f25ca73d8?method=download&shareKey=987641e44832d417d9fefe85fe71cef4" width="408"></p>
<ul>
<li>VoxPopuli
数据集上效果较差，可能由于它具有更多的监督数据，有利于微调。</li>
</ul>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB70ac88b46df672e6102bdd2b686554b3?method=download&shareKey=d23033c50f7911dad31a5f71d216021a" width="418"></p>
<ul>
<li><font color="red">训练数据每增加16倍，WER
减半。</font>训练数据大多为印欧语系，中文（ZH）、韩语（KO）等语种与上述规律偏离较远，可能的原因：语系迁移、tokenizer、数据质量。</li>
</ul>
<h2 id="语音翻译">4.4. 语音翻译</h2>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB772cfc893a6086de48d06fa99f5d6062?method=download&shareKey=5716b9ec8d97207bc03856217ba4bd8a" width="409"></p>
<ul>
<li><font color="red"><span class="math inline">\(x \rightarrow \text
{en}\)</span>
翻译，在低资源语种上翻译效果显著提升，但在高资源语种上略差于
SOTA。</font></li>
<li>由于训练集创建时语种识别错误，导致部分英语音频转写任务被标记为翻译任务。</li>
</ul>
<h2 id="对噪声的鲁棒性">4.5. 对噪声的鲁棒性</h2>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEBf45f39c8413c859841e3dae7ef688dae?method=download&shareKey=e6777c38d08297ef607a589a1bf6ec85" width="414"></p>
<ul>
<li><font color="red">在 LibriSpeech test-clean
上，高信噪比时，性能差于用 LibriSpeech
预训练或微调的模型，但在低信噪比时（如10dB pub 噪声），Whisper
性能较好。</font></li>
</ul>
<h2 id="长音频转写">4.6. 长音频转写</h2>
<ul>
<li><font color="red">连续转写 30s
的片段，根据模型预测的时间戳来移动窗口。</font></li>
<li>采用对数概率作为得分。从温度0开始，即始终选择最高概率的token。当生成
token 的平均对数概率低于 -1，或生成文本的 gzip
压缩率大于2.4时，将温度提高 0.2 直到 1.0，最终为 5 beams 的 beam
search。当温度低于 0.5
时，将前一个窗口的转写文本作为上文输入。可以减少贪婪解码中更频繁出现的重复循环。</li>
<li>结合 no-speech 概率阈值 0.6、平均对数概率阈值
-1，可以更可靠地检测没有语音的片段。</li>
<li>约束第一个时间戳在 0～1s，避免模型忽略前几个词。
<img src="https://note.youdao.com/yws/api/personal/file/WEB76755ca27d1951139ef4c367ac9656bb?method=download&shareKey=c5e47638f97e0a25399aca971e2852a9" width="392"></li>
<li>在所有数据集上，均优于 SOTA 开源模型 NVIDIA STT Conformer-CTC Large
model (Nemo)；在大部分数据集上，优于商业 ASR
系统（训练集可能包含这些公开测试集）。</li>
</ul>
<h2 id="与人类比较">4.7. 与人类比较</h2>
<ul>
<li>由于歧义、不清晰的语音、label
错误等，每个数据集都有不同程度的错误。仅采用 WER
很难衡量还有多少改进空间。</li>
<li>从 Kincaid46
数据集中挑选了25条音频，录音环境涵盖有/无脚本的广播、电话、VoIP
通话、会议。获得5份专业转写员的转写，其中4份完全由人工转写，1份提供了机器辅助转写。</li>
</ul>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEBaafd7b2add354903a7ef71e0cc969dbb?method=download&shareKey=173a38db52d391d654fec5057da63e62" width="380"></p>
<ul>
<li>计算机辅助转写的 WER 最低。Whisper 的英语 ASR
性能接近人类水平，只比纯人工转写的 WER 差不到1个百分点。</li>
</ul>
<h2 id="语种识别">4.8. 语种识别</h2>
<h2 id="vad">4.9. VAD</h2>
<h1 id="消融实验">5. 消融实验</h1>
<h2 id="模型数据规模">5.1. 模型、数据规模</h2>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB76db9ac4e5dc83608d5834e22c85f9c3?method=download&shareKey=321535b080bd0292a0690a1dcff41728" width="953"></p>
<ul>
<li>随着模型大小的增加，英语语音识别的性能接近饱和，可能由于其已接近人类水平。多语种语音识别、语音翻译、语种识别的性能不断提高。</li>
</ul>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB8c5929fe495c4089b905cd581b9a0cd6?method=download&shareKey=dcaa4abc5367d7f32a7bd20e0e4085a3" width="387"></p>
<p>* Whisper medium +
通过更长的训练时间、更大的模型，可以进一步提高性能。</p>
<ul>
<li><font color="green">其它语种、任务是否需要和英语 ASR
相当的数据量来达到最佳性能？</font></li>
<li>数据分布变化后，是否损伤英语 ASR 的性能？</li>
<li>接近人类水平是否是模型的上限？</li>
<li>在当前数据集上，扩大模型容量的收益已接近饱和。继续增加英语 ASR
的数据量是否有意义？数据量增加后进一步扩大模型容量是否有收益？</li>
</ul>
<h2 id="多任务多语种迁移">5.2. 多任务、多语种迁移</h2>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEBc6e4ba8f86c64ac0c4f6822672788ab2?method=download&shareKey=23f20f11fb6137e67baa5297d501e93e" width="389"></p>
<ul>
<li><font color="red">相较于仅在英语 ASR 任务上训练的模型，相同的英语
ASR
训练计算量，采用多任务、多语种训练，小模型性能较差，但扩展到更大的模型时可以超越单一任务模型的性能，从其它任务中获得知识迁移正收益。</font></li>
</ul>
<h1 id="展望">6. 展望</h1>
<ul>
<li><font color="red">存在的问题：陷入重复循环、不转写音频片段的前几个或后几个单词、输出与音频完全无关的文本等，特别是在长音频上。可能的改进方案：在高质量监督数据集上微调Whisper；强化学习。</font></li>
<li>增加低资源语种的训练数据。</li>
<li>微调。</li>
<li>通过消融实验研究 encoder、decoder
分别的收益：比如训练无解码器的CTC模型、对比现有语音识别 encoder (如
wav2vec 2.0) + LM 的性能。</li>
<li>添加无监督预训练或 self-teaching。</li>
</ul>
<h1 id="缺点">7. 缺点</h1>
<ul>
<li>不支持流式</li>
</ul>
<h1 id="todo代码">8. TODO：代码</h1>
<ul>
<li><font color="red">提示输出简体中文，而非繁体字</font>
<code>whisper --language Chinese --model large audio.wav --initial_prompt "以下是普通话的句子。"  # simplified</code></li>
<li>huggingface
<ul>
<li><font color="green">时间戳预测
<code>return_timestamps=True # 句子级时间戳</code>
<code>return_timestamps=word # 词级时间戳</code></font></li>
<li>速度、内存优化
<ul>
<li>长音频转写：chunked 算法 Gandhi S, von Platen P, Rush A M.
Distil-Whisper: Robust Knowledge Distillation via Large-Scale Pseudo
Labelling[J]. arXiv preprint arXiv:2311.00430, 2023.</li>
<li>flash_attention_2</li>
<li>Torch Scale-Product-Attention (SDPA)</li>
</ul></li>
<li>微调：<a target="_blank" rel="noopener" href="https://huggingface.co/blog/zh/fine-tune-whisper" class="uri">https://huggingface.co/blog/zh/fine-tune-whisper</a></li>
</ul></li>
</ul>
<h1 id="其它">9. 其它</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/openai/whisper" class="uri">https://github.com/openai/whisper</a></li>
<li>Radford A, Kim J W, Xu T, et al. Robust speech recognition via
large-scale weak supervision[C]//International Conference on Machine
Learning. PMLR, 2023: 28492-28518.</li>
</ul>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">
                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <i class="fas fa-exclamation-circle"></i>
            <span>
                本文不允许转载。
            </span>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            
        </div>
    </div>

    

    

    
        <div class="disqus-card card" data-aos="fade-up">
    <div id="disqus_thread" class="card-content">
        <noscript>Please enable JavaScript to view the
            <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
    </div>
</div>

<script type="text/javascript">
    disqus_config = function () {
        this.page.url = 'https://nanyang2015.github.io/blog/yin-pin/yu-yin-shi-bie/lun-wen/whisper/';
        this.page.identifier = '/blog/yin-pin/yu-yin-shi-bie/lun-wen/whisper/';
        this.page.title = 'Whisper';
    };
    let disqus_shortname = 'https-nanyang2015-github-io-blog';

    (function () { // DON'T EDIT BELOW THIS LINE
        let d = document, s = d.createElement('script');
        // 如：s.src = 'https://blinkfox.disqus.com/embed.js';
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

    

    

    

    

    

    

    <article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/blog/yin-pin/yu-yin-dui-hua/dgslm/">
                    <div class="card-content">
                        <span class="card-title">dGSLM</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2024-05-28
                            <i class="far fa-edit fa-fw icon-date"></i>2024-10-29
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/blog/categories/%E9%9F%B3%E9%A2%91/" class="post-category">
                                    音频
                                </a>
                            
                            <a href="/blog/categories/%E9%9F%B3%E9%A2%91/%E8%AF%AD%E9%9F%B3%E5%AF%B9%E8%AF%9D/" class="post-category">
                                    语音对话
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/blog/llm/yu-yin-dui-hua/lun-wen/gpt-4o-li-hong-yi/">
                    <div class="card-content">
                        <span class="card-title">李宏毅老师 《GPT-4o 背后可能的语音技术猜测》</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2024-05-23
                                <i class="far fa-edit fa-fw icon-date"></i>2024-11-06
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/blog/categories/LLM/" class="post-category">
                                    LLM
                                </a>
                            
                            <a href="/blog/categories/LLM/%E8%AF%AD%E9%9F%B3%E5%AF%B9%E8%AF%9D/" class="post-category">
                                    语音对话
                                </a>
                            
                            <a href="/blog/categories/LLM/%E8%AF%AD%E9%9F%B3%E5%AF%B9%E8%AF%9D/%E8%AE%BA%E6%96%87/" class="post-category">
                                    论文
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('50')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 梦园<br />'
            + '文章作者: nanyang<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/blog/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- 是否加载使用自带的 prismjs. -->
  <script type="text/javascript" src="/blog/libs/prism/prism.min.js"></script>


<!-- 代码语言 -->

<script type="text/javascript" src="/blog/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/blog/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/blog/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/blog/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('6'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<!-- <script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
    });
</script> -->



    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/blog/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="5001011615"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/blog/libs/aplayer/APlayer.min.js"></script>
<script src="/blog/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2025</span>
            
            <a href="/blog/about" target="_blank">nanyang</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
            <br>
            
            
            
            
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/NanYANG2015" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:2271348390@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2271348390" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2271348390" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/blog/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/blog/libs/materialize/materialize.min.js"></script>
    <script src="/blog/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/blog/libs/aos/aos.js"></script>
    <script src="/blog/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/blog/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/blog/js/matery.js"></script>

    
        <!-- <script src='https://unpkg.com/mermaid@latest/dist/mermaid.min.js'></script> -->
        <script src='/blog/libs/mermaid/mermaid.min.js'></script>
        <script>
          if (window.mermaid) {
            mermaid.initialize({theme: 'neutral'});
          }
        </script>
    

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/blog/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
